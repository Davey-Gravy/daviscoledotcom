{{ define "main" }}
  <header class="article-header">
    <h1>{{ .Title }}</h1>
    {{ with .Content }}
      <div class="article-content">
        {{ . }}
      </div>
    {{ end }}
  </header>

  <div class="books-grid">
    {{ range .Pages.ByDate.Reverse }}
      {{ $cover := "" }}
      {{ with .Params.bookCover }}
        {{ $cover = . }}
      {{ else }}
        {{ with $.Resources.GetMatch "cover.*" }}
          {{ $cover = .RelPermalink }}
        {{ end }}
      {{ end }}
      <a href="{{ .RelPermalink }}" class="book-cover" title="{{ .Title }}">
        {{ if $cover }}
          <img src="{{ $cover }}" alt="{{ .Title }}" loading="lazy">
        {{ else }}
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: var(--bg-tertiary); color: var(--text-tertiary);">
            <span>{{ .Title | truncate 20 }}</span>
          </div>
        {{ end }}
      </a>
    {{ else }}
      <p class="text-secondary">No books yet.</p>
    {{ end }}
  </div>
{{ end }}
