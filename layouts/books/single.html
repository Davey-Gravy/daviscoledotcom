{{ define "main" }}
  <h1>{{ .Title }}</h1>

  {{ if .Params.author }}
    <p><em>By: {{ .Params.author }}</em></p>
  {{ end }}

  {{ if .Params.rating }}
    {{ $r := int .Params.rating }}
    {{ $max := 5 }}

    {{/* clamp rating between 0 and $max */}}
    {{ $full := cond (gt $r $max) $max $r }}
    {{ $full = cond (lt $full 0) 0 $full }}
    {{ $empty := sub $max $full }}

    <div class="flex items-center gap-1" aria-label="Rating: {{ $r }} out of {{ $max }}">
      {{ range seq $full }}
        <svg class="w-5 h-5 text-yellow-600" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.18 3.644a1 1 0 00.95.69h3.83c.969 0 1.371 1.24.588 1.81l-3.1 2.253a1 1 0 00-.364 1.118l1.18 3.644c.3.921-.755 1.688-1.54 1.118l-3.1-2.253a1 1 0 00-1.176 0l-3.1 2.253c-.785.57-1.84-.197-1.54-1.118l1.18-3.644a1 1 0 00-.364-1.118L2.35 9.07c-.783-.57-.38-1.81.588-1.81h3.83a1 1 0 00.95-.69l1.18-3.644z"/>
        </svg>
      {{ end }}

      {{ range seq $empty }}
        <svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" aria-hidden="true">
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.18 3.644a1 1 0 00.95.69h3.83c.969 0 1.371 1.24.588 1.81l-3.1 2.253a1 1 0 00-.364 1.118l1.18 3.644c.3.921-.755 1.688-1.54 1.118l-3.1-2.253a1 1 0 00-1.176 0l-3.1 2.253c-.785.57-1.84-.197-1.54-1.118l1.18-3.644a1 1 0 00-.364-1.118L2.35 9.07c-.783-.57-.38-1.81.588-1.81h3.83a1 1 0 00.95-.69l1.18-3.644z" opacity="0.4"/>
        </svg>
      {{ end }}

      <span class="ms-2 text-sm">{{ $r }}/{{ $max }}</span>
    </div>
  {{ end }}

  {{ .Content }}
{{ end }}
